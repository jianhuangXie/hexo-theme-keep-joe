$logo-title-font-size = 2rem
$pc-search-icon-font-size = 1.5rem
$menu-bar-line-height = 2.5px
$logo-image-box-width = 46px

.header-wrapper {
  display flex
  align-items center
  justify-content center
  box-sizing border-box
  width 100%
  height 100%
  padding-top $scroll-progress-bar-height
  background var(--background-color-1)

  hover-style(false, 0, 0)

  .header-content {
    position relative
    z-index $z-index-5
    display flex
    flex-direction row
    align-items center
    justify-content space-between
    /**width $main-content-width**/
    width $main-h-content-width
    /**max-width $content-max-width**/
    max-width $content-h-max-width
    height 100%
    transition-t("max-width, width", "0, 0", "0.1, 0.1", "ease, ease")


    &.has-first-screen {
      max-width $has-fs-content-max-width
    }

    .has-toc & {
      max-width $has-toc-content-max-width
    }

    +keep-tablet() {
      width $main-content-width-tablet
    }

    +keep-mobile() {
      width $main-content-width-mobile
    }

    .left {
      display flex
      align-items center
      transition-t("transform", "0", "0.2", "linear")

      .header-shrink & {
        transform scale(0.72)
        transform-origin left
      }


      if (hexo-config('base_info.logo_img') || hexo-config('style.logo')) {
        .logo-image {
          width $logo-image-box-width
          height $logo-image-box-width
          margin-right 8px


          +keep-tablet() {
            width $logo-image-box-width * 0.9
            height $logo-image-box-width * 0.9
          }

          +keep-mobile() {
            width $logo-image-box-width * 0.8
            height $logo-image-box-width * 0.8
          }

          img {
            width 100%
            border-radius 6px
          }
        }
      }

      .logo-title {
        color var(--text-color-1)
        font-weight bold
        font-size $logo-title-font-size
        line-height 1
        letter-spacing 1px

        +keep-tablet() {
          font-size $logo-title-font-size * 0.9
        }

        +keep-mobile() {
          font-size $logo-title-font-size * 0.8
        }
      }
    }


    .right {

      .pc {

        .menu-list {
          display flex
          align-items center

          +keep-tablet() {
            display none
          }


          .menu-item {
            position relative
            float left
            margin-left 2rem
            color var(--text-color-3)
            font-size 1rem
            cursor pointer

            &:first-child {
              margin-left 0
            }


            a:hover
            .active {

              &::after {
                position absolute
                bottom -10px
                left 50%
                width 100%
                height 2px
                background var(--primary-color)
                transform translateX(-50%)
                content ''
                transition-t("transform, bottom", "0, 0", "0.2, 0.2", "linear, linear")

                .header-shrink & {
                  bottom -($header-shrink-height / 2 - 12)
                }
              }
            }

            &.search {
              margin-left 26px
              font-size $pc-search-icon-font-size

              i {
                color var(--text-color-3)
              }
            }
          }
        }
      }


      .mobile {
        display flex
        align-items center
        justify-content space-between

        .icon-item {
          position relative
          display none
          width 20px
          height 20px
          margin-left 12px
          color var(--text-color-3)
          font-size 18px
          cursor pointer

          i {
            color var(--text-color-3)
          }

          &:first-child {
            margin-left 0
          }

          +keep-tablet() {
            display flex
            align-items center
            justify-content center
          }
        }

        .menu-bar {

          .menu-bar-middle {
            position relative
            width 18px
            height $menu-bar-line-height
            background var(--text-color-3)

            .header-drawer-show & {
              background transparent
            }


            &::before
            &::after {
              position absolute
              left 0
              width 100%
              height $menu-bar-line-height
              background var(--text-color-3)
              content ''
              transition-t("transform", "0", "0.38", "ease")
            }


            &::before {
              top -6px

              .header-drawer-show & {
                transform translateY(6px) rotate(45deg)
              }
            }


            &::after {
              bottom -6px

              .header-drawer-show & {
                transform translateY(-6px) rotate(-45deg)
              }
            }
          }
        }
      }
    }
  }


  .header-drawer {
    position absolute
    top 0
    left 0
    z-index $z-index-2
    width 100%
    padding $header-height 0 20px 0
    background var(--background-color-1)
    transform scaleY(0)
    transform-origin top
    transition-t("transform", "0", "0.38", "ease")

    .header-drawer-show & {
      transform scaleY(1)
    }

    .drawer-menu-list {
      display flex
      flex-direction column
      align-items center
      justify-content flex-start

      .drawer-menu-item {
        height 38px
        margin 6px 0
        font-size 1rem

        a {
          padding 6px 20px
          color var(--text-color-3)
          border-radius 20px

          &:hover {
            color var(--text-color-2)
            border 1px solid var(--text-color-3)
          }


          &.active {
            color var(--text-color-2)
            border 1px solid var(--text-color-3)
          }
        }
      }
    }
  }


  .window-mask {
    position absolute
    top 0
    z-index $z-index-1
    width 100%
    height 100vh
    background rgba(0, 0, 0, 0.4)
    visibility hidden
    opacity 0
    transition-t("transform, opacity", "0, 0", "0.38, 0.38", "ease, ease")

    .header-drawer-show & {
      visibility visible
      opacity 1
    }
  }
  
.joe_dropdown:active::before,
.joe_dropdown:active::after
.joe_dropdown {
      position: relative
  }

  .joe_dropdown__link {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-align: center;
      -ms-flex-align: center;
      align-items: center
  }

  .joe_dropdown__link-icon {
      -webkit-transition: -webkit-transform .35s;
      transition: transform .35s;
      transition: transform .35s,-webkit-transform .35s;
      margin-left: -12px
  }

  .joe_dropdown__menu {
      position: absolute;
      left: 50%;
      visibility: hidden;
      z-index: 5;
      border-top: 3px solid var(--theme);
      -webkit-transform-origin: top;
      transform-origin: top;
      background: var(--content-background-color);
      -webkit-box-shadow: 0 0 10px rgba(0,0,0,.15);
      box-shadow: 0 0 10px rgba(0,0,0,.15);
      border-radius: 0 0 var(--radius-inner) var(--radius-inner);
      padding: 10px 0;
      opacity: 0;
      -webkit-transform: translateX(-50%) perspective(600px) rotateX(-45deg);
      transform: translateX(-50%) perspective(600px) rotateX(-45deg);
      -webkit-transition: opacity .35s,visibility .35s,-webkit-transform .35s;
      transition: opacity .35s,visibility .35s,transform .35s;
      transition: opacity .35s,visibility .35s,transform .35s,-webkit-transform .35s
  }

  .joe_dropdown__menu::before {
      content: "";
      position: absolute;
      top: -10px;
      left: 50%;
      -webkit-transform: translateX(-50%);
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 7px solid transparent;
      border-right: 7px solid transparent;
      border-bottom: 7px solid var(--theme)
  }

  .joe_dropdown.active .joe_dropdown__link-icon {
      -webkit-transform: rotate(-180deg);
      transform: rotate(-180deg)
  }

  .joe_dropdown.active .joe_dropdown__menu {
      visibility: visible;
      opacity: 1;
      -webkit-transform: translateX(-50%) perspective(600px) rotateX(0);
      transform: translateX(-50%) perspective(600px) rotateX(0)
  }

  .joe_header__above-logo,.joe_header__above-nav,.joe_header__above-nav .item {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-align: center;
      -ms-flex-align: center;
      align-items: center
  }
  
  .header-drawer{
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: flex-start !important;
  }


  .joe_header__above-nav .item {
      cursor: pointer;
      position: relative;
      height: 60px;
      line-height: 60px;
      font-size: 15px;
      padding: 0 8px;
      margin-right: 10px;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      white-space: nowrap;
      color: var(--main);
      -webkit-transition: color .35s;
      transition: color .35s
  }

  .joe_header__above-nav .item>i {
      display: inline-block;
      margin-right: 4px;
      font-size: 18px;
      -webkit-transition: -webkit-transform .5s;
      transition: transform .5s;
      transition: transform .5s,-webkit-transform .5s
  }

  .joe_header__above-nav .item:last-child {
      margin-right: 0
  }

  .joe_header__above-nav .item::after {
      opacity: 0;
      position: absolute;
      bottom: 0;
      left: 6px;
      right: 6px;
      content: "";
      height: 3px;
      -webkit-transform: scaleX(.25);
      transform: scaleX(.25);
      background: var(--theme);
      border-radius: 6px 6px 0 0;
      -webkit-transition: opacity .5s,-webkit-transform .5s;
      transition: opacity .5s,transform .5s;
      transition: opacity .5s,transform .5s,-webkit-transform .5s
  }

  .joe_header__above-nav .item.current,.joe_header__above-nav .item:hover {
      color: var(--theme)
  }

  .joe_header__above-nav .item.current::after,.joe_header__above-nav .item.current:hover::after {
      opacity: 1;
      -webkit-transform: scaleX(1);
      transform: scaleX(1)
  }

  .joe_header__above-nav .item:hover::after {
      opacity: .3;
      -webkit-transform: scaleX(.7);
      transform: scaleX(.7)
  }

  .joe_header__above-nav .item:hover+.joe-icon-arrow-down,.joe_header__above-nav .joe_dropdown.active .joe_dropdown__link a,.joe_header__above-nav .joe_dropdown.active .joe_dropdown__link i {
      color: var(--theme)!important
  }

  .joe_header__above-nav.active-shadow .item.current {
      text-shadow: 0 4px 20px var(--theme)
  }

  .joe_header__above-nav.active-animate .item:hover .m-icon {
      -webkit-animation: dung .3s .12s ease;
      animation: dung .3s .12s ease
  }

  .joe_header__above-nav .joe_dropdown {
      margin-right: 15px
  }

  .joe_header__above-nav .joe_dropdown__link a {
      height: 60px;
      line-height: 60px;
      font-size: 15px;
      padding-left: 8px;
      padding-right: 3px;
      -webkit-transition: color .35s;
      transition: color .35s;
      white-space: nowrap;
      color: var(--main)
  }

  .joe_header__above-nav .joe_dropdown__menu {
      min-width: 90px;
      max-width: 200px;
      text-align: center
  }

  .joe_header__above-nav .joe_dropdown__menu a {
      display: block;
      height: 34px;
      margin-right: 0;
      line-height: 34px;
      /**color: var(--content-background-color);**/
      color: var(--text-color-3);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      padding: 0 15px;
      -webkit-transition: color .35s,background .35s;
      transition: color .35s,background .35s
  }

  .joe_header__above-nav .joe_dropdown__menu a.current,.joe_header__above-nav .joe_dropdown__menu a:hover {
      color: var(--theme);
      background: var(--sib)
  }

  .joe_header__above-nav .joe_dropdown .item:hover:after,.joe_header__above-nav .joe_dropdown.active .joe_dropdown__link a::after,.joe_header__above-nav .joe_dropdown.active .joe_dropdown__link i::after {
      display: none
  }

  .joe_header__above-nav .joe_nav_sub-li {
      position: relative;
      height: 34px
  }

  .joe_header__above-nav .joe_nav_sub-li .m-icon {
      vertical-align: bottom
  }

  .joe_header__above-nav .joe_nav_sub-li:hover .joe_nav_sub {
      visibility: visible;
      opacity: 1;
      -webkit-transform: translateX(0) perspective(600px) rotateY(0);
      transform: translateX(0) perspective(600px) rotateY(0)
  }

  .joe_header__above-nav .joe_nav_sub {
      visibility: hidden;
      z-index: 10;
      -webkit-transform-origin: top;
      transform-origin: top;
      opacity: 0;
      position: relative;
      left: 100%;
      top: -34px;
      padding-left: 7px;
      -webkit-box-shadow: 7px 3px 8px 0 rgba(0,0,0,.15);
      box-shadow: 7px 3px 8px 0 rgba(0,0,0,.15);
      border-radius: 0 var(--radius-inner) var(--radius-inner) 0;
      -webkit-transform: translateX(-20%) perspective(600px) rotateY(-45deg);
      transform: translateX(-20%) perspective(600px) rotateY(-45deg);
      -webkit-transition: opacity .35s,visibility .35s,-webkit-transform .35s;
      transition: opacity .35s,visibility .35s,transform .35s;
      transition: opacity .35s,visibility .35s,transform .35s,-webkit-transform .35s
  }

  .joe_header__above-nav .joe_nav_sub::before {
      position: absolute;
      top: 10px;
      left: 0;
      content: "";
      -webkit-transform: translateX(-50%);
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border: 7px solid transparent;
      border-right-color: var(--theme)
  }

  .joe_header__above-nav .joe_nav_sub::after {
      position: absolute;
      top: 0;
      left: 7px;
      content: "";
      width: 2px;
      height: 100%;
      background: var(--theme)
  }

  .joe_header__above-nav .joe_nav_sub li {
      background: var(--sib-background)
  }
}

.header-drawer-show {
  overflow hidden
}
